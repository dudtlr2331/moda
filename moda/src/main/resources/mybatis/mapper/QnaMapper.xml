<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.moda.adm.qna.dao.QnaDao">
    <!-- qna 테이블 전체 컬럼 -->
    <sql id="qnaColumns">
        qnaNum
        , uId
        , qnaTitle
        , qContent
        , aContent
        , qnaStat
        , qnaDate
    </sql>

    <!-- 게시글 상세정보 조회 -->
    <select id="findByNum" parameterType="long" resultType="com.moda.adm.qna.QnaDto">
        SELECT
        <include refid="qnaColumns" />
        FROM
        qna
        WHERE
        qnaNum = #{value}
    </select>


    <!-- 게시글 수정 -->
    <update id="update" parameterType="com.moda.adm.qna.QnaSearch">
        UPDATE qna
        SET
            aContent = #{a_content}
          , qnaStat = #{stat}
        WHERE
            qnaNum = #{qna_num}
    </update>

    <!-- 게시글 리스트 조회 -->
    <select id="findAll" resultType="com.moda.adm.qna.QnaDto">
        SELECT <include refid="qnaColumns" />
        FROM qna
        WHERE qnaStat = 0
        ORDER BY qnaNum ASC
    </select>

</mapper>